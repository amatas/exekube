image: bitnami/drupal:8.4.4-r0
imagePullPolicy: IfNotPresent

drupalUsername: user
drupalEmail: admin@example.com

allowEmptyPassword: yes

externalDatabase:

mariadb:
  enabled: true
  mariadbDatabase: bitnami_drupal
  mariadbUser: bn_drupal
  persistence:
    enabled: true
    accessMode: ReadWriteOnce
    size: 8Gi

serviceType: ClusterIP

ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: "nginx"
    kubernetes.io/tls-acme: "true"
  hostname: ${domain_name}
  tls:
    - secretName: drupal-app-tls
      hosts:
        - ${domain_name}

persistence:
  enabled: true
  apache:
    accessMode: ReadWriteOnce
    size: 1Gi
  drupal:
    accessMode: ReadWriteOnce
    size: 8Gi

resources:
  requests:
    memory: 512Mi
    cpu: 300m

volumeMounts:
  drupal:
    mountPath: /bitnami/drupal
  apache:
    mountPath: /bitnami/apache

livenessProbe:
  httpGet:
    path: /user/login
    port: http
  initialDelaySeconds: 120

readinessProbe:
  httpGet:
    path: /user/login
    port: http
  initialDelaySeconds: 30
